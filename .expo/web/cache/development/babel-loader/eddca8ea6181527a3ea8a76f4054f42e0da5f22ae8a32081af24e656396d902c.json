{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, updateProfile } from \"firebase/auth\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { auth } from \"../../firebase/config\";\nimport { updateUserProfile, authSignOut, authStateChange, updateUserAvatar } from \"./authReducer\";\nexport var authSignUpUser = function authSignUpUser(_ref) {\n  var email = _ref.email,\n    password = _ref.password,\n    nickname = _ref.nickname,\n    userPhoto = _ref.userPhoto;\n  return function () {\n    var _ref2 = _asyncToGenerator(function* (dispatch) {\n      try {\n        yield createUserWithEmailAndPassword(auth, email, password);\n        yield updateProfile(auth.currentUser, {\n          displayName: nickname,\n          photoURL: userPhoto\n        });\n        var user = auth.currentUser;\n        console.log('user', user);\n        dispatch(updateUserProfile({\n          userId: user.uid,\n          nickname: user.displayName,\n          userPhoto: user.photoURL,\n          email: user.email\n        }));\n      } catch (error) {\n        Alert.alert(error.message);\n        console.log(error);\n      }\n    });\n    return function (_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n};\nexport var authSignInUser = function authSignInUser(_ref3) {\n  var email = _ref3.email,\n    password = _ref3.password;\n  return _asyncToGenerator(function* () {\n    try {\n      var user = yield signInWithEmailAndPassword(auth, email, password);\n      console.log(\"user\", user);\n    } catch (error) {\n      Alert.alert(error.message);\n    }\n  });\n};\nexport var authSignOutUser = function authSignOutUser() {\n  return function () {\n    var _ref5 = _asyncToGenerator(function* (dispatch) {\n      signOut(auth);\n      dispatch(authSignOut());\n    });\n    return function (_x2) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n};\nexport var authStateChangeUser = function authStateChangeUser() {\n  return function () {\n    var _ref6 = _asyncToGenerator(function* (dispatch) {\n      auth.onAuthStateChanged(function () {\n        var _ref7 = _asyncToGenerator(function* (user) {\n          try {\n            if (user) {\n              var userUpdateProfile = {\n                userId: user.uid,\n                nickname: user.displayName,\n                userPhoto: user.photoURL,\n                email: user.email\n              };\n              dispatch(authStateChange({\n                stateChange: true\n              }));\n              dispatch(updateUserProfile(userUpdateProfile));\n            }\n          } catch (error) {\n            Alert.alert(error.message);\n          }\n        });\n        return function (_x4) {\n          return _ref7.apply(this, arguments);\n        };\n      }());\n    });\n    return function (_x3) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n};\nexport var authUpdateAvatar = function authUpdateAvatar(photoURL) {\n  return function () {\n    var _ref8 = _asyncToGenerator(function* (dispatch) {\n      try {\n        yield updateProfile(auth.currentUser, {\n          photoURL: photoURL\n        });\n        var user = auth.currentUser;\n        dispatch(updateUserAvatar({\n          userPhoto: user.photoURL\n        }));\n      } catch (error) {\n        Alert.alert(error.message);\n      }\n    });\n    return function (_x5) {\n      return _ref8.apply(this, arguments);\n    };\n  }();\n};","map":{"version":3,"names":["createUserWithEmailAndPassword","signInWithEmailAndPassword","signOut","updateProfile","Alert","auth","updateUserProfile","authSignOut","authStateChange","updateUserAvatar","authSignUpUser","_ref","email","password","nickname","userPhoto","_ref2","_asyncToGenerator","dispatch","currentUser","displayName","photoURL","user","console","log","userId","uid","error","alert","message","_x","apply","arguments","authSignInUser","_ref3","authSignOutUser","_ref5","_x2","authStateChangeUser","_ref6","onAuthStateChanged","_ref7","userUpdateProfile","stateChange","_x4","_x3","authUpdateAvatar","_ref8","_x5"],"sources":["C:/Users/Meruem/Desktop/diplom_project/redux/auth/authOperations.js"],"sourcesContent":["import {\r\n  createUserWithEmailAndPassword,\r\n  signInWithEmailAndPassword,\r\n  signOut,\r\n  updateProfile,\r\n} from \"firebase/auth\";\r\nimport { Alert } from \"react-native\";\r\n\r\nimport { auth } from \"../../firebase/config\";\r\n\r\nimport { updateUserProfile, authSignOut, authStateChange, updateUserAvatar } from \"./authReducer\";\r\n\r\n\r\nexport const authSignUpUser =\r\n  ({ email, password, nickname, userPhoto }) =>\r\n  async (dispatch) => {\r\n    try {\r\n      await createUserWithEmailAndPassword(auth, email, password);\r\n\r\n      await updateProfile(auth.currentUser, {\r\n        displayName: nickname,\r\n        photoURL: userPhoto,\r\n      });\r\n      const user = auth.currentUser;\r\n      console.log('user', user);\r\n\r\n      dispatch(\r\n        updateUserProfile({\r\n          userId: user.uid,\r\n          nickname: user.displayName,\r\n          userPhoto: user.photoURL,\r\n          email: user.email,\r\n        })\r\n      );\r\n    } catch (error) {\r\n      Alert.alert(error.message);\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\nexport const authSignInUser = ({ email, password }) => async () =>\r\n{\r\n    try {\r\n      const user = await signInWithEmailAndPassword(auth, email, password);\r\n      console.log(\"user\", user);\r\n    } catch (error) {\r\n      Alert.alert(error.message);\r\n    }};\r\n\r\nexport const authSignOutUser = () => async (dispatch) => {\r\n  signOut(auth);\r\n  dispatch(authSignOut());\r\n};\r\n\r\nexport const authStateChangeUser = () => async (dispatch) => {\r\n  auth.onAuthStateChanged(async (user) => {\r\n    try {\r\n      if (user) {\r\n        const userUpdateProfile = {\r\n          userId: user.uid,\r\n          nickname: user.displayName,\r\n          userPhoto: user.photoURL,\r\n          email: user.email,\r\n        };\r\n\r\n        dispatch(authStateChange({ stateChange: true }));\r\n        dispatch(updateUserProfile(userUpdateProfile));\r\n      }\r\n    } catch (error) {\r\n      Alert.alert(error.message);\r\n    }\r\n  });\r\n};\r\n\r\nexport const authUpdateAvatar = (photoURL) => async (dispatch) => {\r\n  try {\r\n    await updateProfile(auth.currentUser, {\r\n      photoURL,\r\n    });\r\n    const user = auth.currentUser;\r\n    dispatch(\r\n      updateUserAvatar({\r\n        userPhoto: user.photoURL,\r\n      })\r\n    );\r\n  } catch (error) {\r\n      Alert.alert(error.message);\r\n    }\r\n  };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}